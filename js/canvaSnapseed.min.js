/*! canvaSnapseed [1.0.0] 2015-02-24, 07:13:53 PM */
this.math=this.math||{},this.math.MAT5_TYPE=this.math.MAT5_TYPE||Float32Array,function(){"use strict";function a(a){this._initProperties(),this.set(a||[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1])}a.mix=function(a,b,c){return a.add(b.sub(a).scale(c))};var b=a.prototype;b._initProperties=function(){Object.defineProperty(this,"brightness",{get:function(){return this.raw[20]},set:function(a){var b=this.raw;b[20]=b[21]=b[22]=a}}),Object.defineProperty(this,"contrast",{get:function(){return this.raw[0]},set:function(a){var b=this.raw;b[0]=b[6]=b[12]=a,b[20]=b[21]=b[22]=128*(1-a)}})},b.set=function(a){if(this.raw=a.constructor===Array?new math.MAT5_TYPE(a):a,25!==this.raw.length)throw new Error("invalid raw length")},b.mul3=function(a,b){var c=a[0],d=a[1],e=a[2],f=this.raw;b[0]=c*f[0]+d*f[5]+e*f[10]+1*f[20],b[1]=c*f[1]+d*f[6]+e*f[11]+1*f[21],b[2]=c*f[2]+d*f[7]+e*f[12]+1*f[22]},b.mul4=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=this.raw;b[0]=c*g[0]+d*g[5]+e*g[10]+f*g[15]+1*g[20],b[1]=c*g[1]+d*g[6]+e*g[11]+f*g[16]+1*g[21],b[2]=c*g[2]+d*g[7]+e*g[12]+f*g[17]+1*g[22],b[3]=c*g[3]+d*g[8]+e*g[13]+f*g[18]+1*g[23]},b.append=function(a){var b,c,d,e,f,g=this.clone().raw,h=a.raw,i=g[0],j=g[5],k=g[10],l=g[15],m=g[20],n=g[1],o=g[6],p=g[11],q=g[16],r=g[21],s=g[2],t=g[7],u=g[12],v=g[17],w=g[22],x=g[3],y=g[8],z=g[13],A=g[18],B=g[23],C=g[4],D=g[9],E=g[14],F=g[19],G=g[24],H=new math.MAT5_TYPE(25);return b=h[0],c=h[1],d=h[2],e=h[3],f=h[4],H[0]=i*b+j*c+k*d+l*e+m*f,H[1]=n*b+o*c+p*d+q*e+r*f,H[2]=s*b+t*c+u*d+v*e+w*f,H[3]=x*b+y*c+z*d+A*e+B*f,H[4]=C*b+D*c+E*d+F*e+G*f,b=h[5],c=h[6],d=h[7],e=h[8],f=h[9],H[5]=i*b+j*c+k*d+l*e+m*f,H[6]=n*b+o*c+p*d+q*e+r*f,H[7]=s*b+t*c+u*d+v*e+w*f,H[8]=x*b+y*c+z*d+A*e+B*f,H[9]=C*b+D*c+E*d+F*e+G*f,b=h[10],c=h[11],d=h[12],e=h[13],f=h[14],H[10]=i*b+j*c+k*d+l*e+m*f,H[11]=n*b+o*c+p*d+q*e+r*f,H[12]=s*b+t*c+u*d+v*e+w*f,H[13]=x*b+y*c+z*d+A*e+B*f,H[14]=C*b+D*c+E*d+F*e+G*f,b=h[15],c=h[16],d=h[17],e=h[18],f=h[19],H[15]=i*b+j*c+k*d+l*e+m*f,H[16]=n*b+o*c+p*d+q*e+r*f,H[17]=s*b+t*c+u*d+v*e+w*f,H[18]=x*b+y*c+z*d+A*e+B*f,H[19]=C*b+D*c+E*d+F*e+G*f,b=h[20],c=h[21],d=h[22],e=h[23],f=h[24],H[20]=i*b+j*c+k*d+l*e+m*f,H[21]=n*b+o*c+p*d+q*e+r*f,H[22]=s*b+t*c+u*d+v*e+w*f,H[23]=x*b+y*c+z*d+A*e+B*f,H[24]=C*b+D*c+E*d+F*e+G*f,new math.Mat5(H)},b.identity=function(){var a=this.raw;return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=0,a[6]=1,a[7]=0,a[8]=0,a[9]=0,a[10]=0,a[11]=0,a[12]=1,a[13]=0,a[14]=0,a[15]=0,a[16]=0,a[17]=0,a[18]=1,a[19]=0,a[20]=0,a[21]=0,a[22]=0,a[23]=0,a[24]=1,this},b.add=function(a){for(var b=this.raw,c=a.raw,d=new math.MAT5_TYPE(25),e=0,f=b.length;f>e;e++)d[e]=b[e]+c[e];return new math.Mat5(d)},b.sub=function(a){for(var b=this.raw,c=a.raw,d=new math.MAT5_TYPE(25),e=0,f=b.length;f>e;e++)d[e]=b[e]-c[e];return new math.Mat5(d)},b.scale=function(a){for(var b=this.raw,c=new math.MAT5_TYPE(25),d=0,e=b.length;e>d;d++)c[d]=a*b[d];return new math.Mat5(c)},b.clone=function(){return new math.Mat5(new math.MAT5_TYPE(this.raw))},b.toString=function(){var a=this.raw;return"matrix 5x5\n"+a[0]+", "+a[5]+", "+a[10]+", "+a[15]+", "+a[20]+"\n"+a[1]+", "+a[6]+", "+a[11]+", "+a[16]+", "+a[21]+"\n"+a[2]+", "+a[7]+", "+a[12]+", "+a[17]+", "+a[22]+"\n"+a[3]+", "+a[8]+", "+a[13]+", "+a[18]+", "+a[23]+"\n"+a[4]+", "+a[9]+", "+a[14]+", "+a[19]+", "+a[24]},math.Mat5=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.DisplayObject_constructor(),this.imageData=a,this.raw=new Uint8ClampedArray(a.data),this.colorMatrixChanged=!1,this._colorMatrices=[],this.initProperties()}var b=createjs.extend(a,createjs.DisplayObject);b.initProperties=function(){Object.defineProperty(this,"colorMatrices",{enumerable:!0,get:function(){return this._colorMatrices},set:function(a){if(a.constructor!==Array)throw new Error("invalid type: "+a.constructor);this.colorMatrixChanged=!0,this._colorMatrices=a}})},b.updateColorMatrices=function(){if(this.colorMatrixChanged&&0!=this._colorMatrices.length){for(var a=this.calcColorMatrices(),b=this.raw,c=this.imageData.data,d=new Uint8ClampedArray(3),e=new Uint8ClampedArray(3),f=0,g=b.length;g>f;f+=4)d[0]=b[f],d[1]=b[f+1],d[2]=b[f+2],a.mul3(d,e),c[f]=e[0],c[f+1]=e[1],c[f+2]=e[2];this.colorMatrixChanged=!1}},b.calcColorMatrices=function(){for(var a=this._colorMatrices[0],b=1,c=this._colorMatrices.length;c>b;b++)a=a.append(this._colorMatrices[b]);return a},b.draw=function(a){this.updateColorMatrices(),a.putImageData(this.imageData,0,0)},b.getBounds=function(){var a=this.DisplayObject_getBounds();return a?a:"undefined"!=typeof this.imageData?this._rectangle.setValues(0,0,this.imageData.width,this.imageData.height):null},b.getPixel=function(a,b){var c=this._pixelIndex(a,b);if(-1==c)return 0;var d=this.imageData.data,e=d[c],f=d[c+1],g=d[c+2];return e<<16|f<<8|g},b.getPixel32=function(a,b){var c=this._pixelIndex(a,b);if(-1==c)return 0;var d=this.imageData.data,e=d[c],f=d[c+1],g=d[c+2],h=d[c+3];return h<<24|e<<16|f<<8|g},b.setPixel=function(a,b,c){var d=this._pixelIndex(a,b);if(-1!=d){c=parseInt(c);var e=this.imageData.data;e[d]=c>>16&255,e[d+1]=c>>8&255,e[d+2]=255&c}},b.setPixel32=function(a,b,c){var d=this._pixelIndex(a,b);if(-1!=d){c=parseInt(c);var e=this.imageData.data;e[d]=c>>16&255,e[d+1]=c>>8&255,e[d+2]=255&c,e[d+3]=c>>24&255}},b._pixelIndex=function(a,b){return 0>a||a>this.width||0>b||b>this.height?-1:4*b*this.imageData.width+a},createjs.BitmapData=createjs.promote(a,"DisplayObject")}(),function(){window.onload=function(){}}();